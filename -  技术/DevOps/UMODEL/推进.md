# 背景

## 一线研发的心声

作为一名一线的开发者，我进入七猫之后，开发了一个新的应用需要接入监控指标，如何接入？没有统一的标准，每个团队都有各自的写法，只能自己动手编写工具库来实现。然后线上遇到问题了，需要做性能分析发现服务没有打开 profiling 开关，然后我重新编写代码、发布、部署，难道公司框架层面就没有做适配吗？

接入各个基础设施（metric, log, profiling, traces）**没有统一标准，都有不少的学习成本**。

## 基础平台的心声

但同时作为基础平台的一员，我又何尝不想改变这个现状呢？而七猫发展至今业务相对成熟，每个团队都有自己的规范，大到项目的框架组件选型，小到目录结构工具类库，都有不同程度的差异。同时因为 Golang 语言特性是编译为二进制后，直接运行在宿主容器中，不像是 Java 等语言能通过字节码的方式在运行时完成代码插桩。所以给我们的技术栈统一也带来了更大的挑战。

好的基建应该是，业务开发人员**根本不需要关心这些配置**，无感知的，开箱即用的。

所以，如何才能做到既「统一」又「无侵入」呢？让我们带着这个问题往下看。

# 可观测简介

![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=MjM1OGQwMzZjMTA0ZGQ4NmU2MTIzMDZjOTM5MjAwNWVfalVUTHVOS0ExS1diWHFhWUJGM1RCTjZRVFkwQ3dFbVlfVG9rZW46TGZBM2J6UHRRb3AxOUZ4OVhLUmNlMjlvbmNiXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)

- 指标（Metrics）：记录一段时间内各个维度的量化信息，用来观察系统的某些状态和趋势，是系统的宏观表示，也是观测的入口。
    
- 日志（Logs）：记录程序运行过程中产生的一些离散事件。
    
- 链路追踪（Traces）：记录一次请求从接收到处理完成整个生命周期内的调用链路，用于细粒度诊断，需要关注的链路的完整性。
    
- 持续剖析（Profiling）：记录一段时间内的CPU，内存使用详情，提供最为丰富的诊断信息。
    

# UModel

## 是什么？

一句话总结，UModel 是专门为可观测建立的数据模型。

UModel 是从可观测领域出发构建的 IT 统一建模框架。它不仅仅是数据的抽象，更是一个融合**数据、知识、行动**三位一体的完整体系。

1. **数据层：**涵盖全域实体和观测数据，尤其包括各类关联关系。
    
2. **知识层：**沉淀领域专业知识，运维知识、分析模板、领域模型等。
    
3. **行动层：**支撑自动化决策执行的各类操作定义。
    

![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=ODJhMTI0ZjMxYjM5MWNlYTg5MTJlYjM2MWUwODJlNzBfeWVoenVwR3FBQ0JWUTlldWJ3eGRkYkRRUWU0Sjd3STdfVG9rZW46VzRqZ2IzVU1mb2VqNzh4UUFhS2M1MkFtbm9kXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)

## 为什么？

**AI 大模型的出现给了我们强大的工具**，但实践中发现，当把这些“大脑”直接接入到“原始”的可观测数据流中时，却发现效果有限，往往还出现反作用。AI 缺乏对特定领域的结构化理解，面对没有上下文、没有关系的原始数据，几乎不可能做出精准判断。而这一现象在可观测领域更为明显。

1. **数据标准化：**解决数据格式混乱问题，借助 OpenTelemetry 开放标准，定义各类可观测数据的互操作。
    
2. **实体与关联：**引入 EntitySet 概念描述 IT 世界的核心对象，通过 Link 建立实体间的调用、依赖、归属等关系，构建起 IT 系统的拓扑图谱。
    
3. **知识表达：**沉淀领域专家经验，通过 Semantic 的 Set 表达“知识”，让系统不仅有数据，还有相关背景和分析数据的方法。
    

## 界面演示

![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=NDU1NWJkN2FiNDVmMDZkMWUxOTgxNDU5NDY3MmIwZmVfV3lYS3dhc1ZycHpJYjBMc21BYUxhY3pRcGFJMGwwZGlfVG9rZW46WlRXOWJGMVBob0h5dTJ4NTYyMmNEb3U2bjhlXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)

![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=OTkzMGZiNDAzOWRmYTczMTg5Nzk2NWRmMzRkNTE4ZWNfaE81bWNZd21BQnFCMmtPd3Q0WHN2NWFicWJVeWJMeDBfVG9rZW46SXFRVGJEM1FXb3NWek14Tzd2QWMxakowbm5nXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=YTc4NTFiMDM0MTJkYzI3YzVkMTU3YzhiNGMwY2JmYmJfTnZWS3FpR3lLVG5QUmprREZoVUZSclZBSzNhZDl1ZkJfVG9rZW46WUlwamJqOWp6b3BrOUR4eVpIRmNvWndPblBmXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)

![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=Yzg1MjI2ODg4ZDNiNDcxMmZmNjZkODAxMmM5MWJlZjVfYTVpaDdDa3JEd0REeTdIUEU0MXp5TzNZV3E1cHJxMTNfVG9rZW46QlVVSWI1MUhzb0hYdzF4VkVSd2NURFhubmViXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=Yzk2NzJkMDc4YzNmZTQ0YzFiYmU4MzUzYzRmMDA2MTVfM0hscks3VjI5aFdDQk1nMHBPY05uNkFmY1lvWTEzSzlfVG9rZW46SzhxbWJuaXFNb0M4cW54Sm1CeWNRRTZSbjVkXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)

## 如何接入？

这里以运行在 K8s 的 golang 服务为例，实际操作下来 2 分钟即可完成。

1. 联系运维同学：安装ARMS探针接入助手（ack-onepilot）
    
2. 采用阿里云提供的**自动插桩工具**进行构建打包：
    

```Plain
# 下载instgo
wget http://arms-apm-cn-shanghai.oss-cn-shanghai.aliyuncs.com/instgo/instgo-linux-amd64 -O instgo

# 赋予可执行权限
chmod +x instgo

# 将instgo 添加到你的编译命令go build前
instgo go build {arg1} {arg2} {arg3}
```

3. 添加 deployment 标签：
    

```YAML
labels:
  aliyun.com/app-language: golang # Go应用必填，标明此应用是Go应用。
  armsPilotAutoEnable: 'on'
  armsPilotCreateAppName: "<your-deployment-name>"    #请将<your-deployment-name>替换为您的应用名称。
  armsPilotAppWorkspace: default-cms-1276757891219814-cn-shanghai  # 当前workspace
```

## 没有银弹

![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=Mzk1MjI0YjM4M2QxOWY1ZDY2YTdkYmYyNWQ0NjlmMzZfNEQ2aXIzSXFLang4b2NQTlJxMk9taW1IamRUM3ZmcjVfVG9rZW46VjBscmI3c2plb1VFTzN4VmExWmNNYlVubkRoXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)

虽然 instgo 编译工具可以完成自动插桩，但是也要求了我们的项目中需要使用常用的框架与组件。这同时也**倒推我们需要对项目技术选型进行规范**。

# 推进方案

## 第一阶段：点亮应用地图

七猫现状分析：目前已经有不少服务接入了 traces 采集，所以在 UModel 中已经自动被识别。所以这里会有三种情况：

- 全新的应用（P1）
    
- 老的应用，没有接入（P1）
    
- 老的应用，已经接入traces， 重新接入获得更完善的数据（P2）
    

**价值**：提供业务可观测的规范，降低业务人员接入成本，核心目标是提升业务的稳定性。**这一阶段，我们解决的是运维域的数据可观测问题。**

## 第二阶段：Devops 全流程打通

解决了第一阶段的数据问题，接下来就需要解决「数据」与「人的活动」之间关系。

![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=OWY0OWNiY2QwYWMyYzJjY2IwNmYxMWM4ZGE0NTI3N2ZfZjF3VjV1OHhLY283QXEwNVh1MUNINGNzUWxURjJLUmxfVG9rZW46Snp4QmI3a0p3b2xrVTZ4UXhrYWNqZnFLbndiXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)

软件生命周期需要一套统一的体系来支撑 AI 能力的全面融入，实现从代码编写到线上运维的全流程 AI 赋能。核心痛点：

- **研发工具链分散：**代码仓库、CI/CD平台、问题跟踪系统各自独立，数据割裂，难以形成统一视图。
    
- **数据关联困难：**无法将代码变更、部署事件、运行异常进行有效关联，根因分析困难。
    

通过 umodel 数据模型的能力将**开发域**与**运维域**进行打通：

![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=MTczNWQ3ODk3Mjg1YmRkZjdmYzIxZmJkNmYzZDU0NTVfeENRR09ZM3BJT1lzS0pPdTBaWllwbUhpd1I5dXFXVGFfVG9rZW46TXB0bGJaS3Uyb2p0aDd4dzhGTWN0ZEZtbm5iXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)

**价值**：研发态（Dev）、运行态（Ops）数据统一建模，实现端到端的全链路分析。**这一阶段，我们解决的是** **devops** **整体的效率问题。**

## 第三阶段：构建 AIOps 全流程

完成第一、二阶段之后，七猫 devops 流程可以达到业界较为领先的水平，很多一线互联网公司也不一定有全链路的 devops 基建。那么接下来我们需要**将 AI深度融入每个环节，实现真正的AIOps**。

![](https://x0sgcptncj.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTBlNWRmMWIzZDVlOTYxY2E0MTkzMjA3NTM2ZmI4Y2ZfbTNLRE1GWGpBU0t5ZFZ5TXRhaFVXeVM2TWJhRTdlY1dfVG9rZW46UGs3RmJWc1U1b3RxZEh4TVh3cWNzcTI4bjRiXzE3NjM2MTAyNTE6MTc2MzYxMzg1MV9WNA)

- **代码评审**：借助AI技术，对代码进行智能化审查，分析代码结构、逻辑以及潜在风险，提供改进建议，提高代码质量和可维护性，进一步优化开发流程。
    
- **服务部署**：利用AI实现自动化部署流程，根据业务需求和系统资源状况，智能规划部署方案，预测部署过程中可能出现的问题并提前规避，提升部署的效率和成功率。
    
- **告警排查**：通过AI实时分析告警数据，快速定位问题根源，关联相关历史数据和知识经验，提供精准的故障解决方案，减少排查时间，提升用户对系统稳定性的体验。
    

**价值**：这一阶段，我们解决的是**用户体验**的问题。

暂时无法在飞书文档外展示此内容