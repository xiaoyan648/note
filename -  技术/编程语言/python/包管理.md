
pip、uv

## 为什么需要虚拟环境？

### 场景1：版本冲突

# 1. 创建虚拟环境（如果还没有）

python3 -m venv venv

# 2. 激活虚拟环境（macOS/Linux）

source venv/bin/activate

# 激活后，你的终端提示符会变成：

# (venv) ➜  xhs-toolkit git:(main) ✗

#      ↑ 这个 (venv) 表示虚拟环境已激活

# 3. 现在运行任何命令都会使用虚拟环境的Python和包

python --version  # 使用的是虚拟环境的Python

pip list          # 显示的是虚拟环境中的包

# 4. 安装依赖

pip install -r requirements.txt

# 5. 运行你的工具

./xhs cookie save

# 6. 退出虚拟环境（完成后）

deactivate

### 场景2：保持系统干净

# uv 会自动创建和管理虚拟环境，无需手动激活

# 1. 安装依赖（自动创建 .venv 虚拟环境）

uv sync

# 2. 运行命令（自动使用虚拟环境）

uv run python xhs_toolkit.py cookie save

# 或者直接用项目的启动脚本（已经自动处理）

./xhs cookie save

### 场景3：团队协作

# ❌ 激活前：使用系统Python

➜  xhs-toolkit git:(main) ✗ which python

/usr/bin/python3

➜  xhs-toolkit git:(main) ✗ pip list

# 显示系统安装的所有包（很多，很乱）

# ✅ 激活后：使用虚拟环境的Python

➜  xhs-toolkit git:(main) ✗ source venv/bin/activate

(venv) ➜  xhs-toolkit git:(main) ✗ which python

/Users/staff/code/ai/xhs-toolkit/venv/bin/python

(venv) ➜  xhs-toolkit git:(main) ✗ pip list

# 只显示这个项目需要的包（干净整洁）

### 总结

| 操作     | 说明                              | 效果                 |
| ------ | ------------------------------- | ------------------ |
| 创建虚拟环境 | python -m venv venv             | 创建一个隔离的Python环境    |
| 激活虚拟环境 | source venv/bin/activate        | 让终端使用虚拟环境的Python和包 |
| 安装依赖   | pip install -r requirements.txt | 包安装到虚拟环境中，不影响系统    |
| 运行项目   | python script.py                | 使用虚拟环境中的包          |
| 退出虚拟环境 | deactivate                      | 回到系统Python         |

## 运行在本地环境
>当我们通过 uvx xxx 运行时默认会从网络上获取相关包执行

#### 方式1：在虚拟环境中直接运行
```
source .venv/bin/activate

xhs-toolkit
```

  
#### 方式2：使用 uv run（在项目目录下运行本地代码）
```
uv run xhs-toolkit
```

  

#### 方式3：使用 uvx 指定本地路径

uvx --from /Users/staff/code/ai/xhs-toolkit xhs-toolkit